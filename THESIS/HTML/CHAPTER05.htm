<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href=".\thesis.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>
<h1>CHÆ¯Æ NG 5: PHÆ¯Æ NG PHÃP KHAI THÃC FREQUENT ITEMS TRONG DATA STREAM</h1>
<p class="abstract">Trong chÆ°Æ¡ng nÃ y, chÃºng tÃ´i sáº½ trÃ¬nh bÃ y thuáº­t toÃ¡n khai thÃ¡c frequent item
trÃªn data stream lÃ  TwMinSwap. Thuáº­t toÃ¡n nÃ y Ä‘Æ°á»£c lá»±a chá»n tá»« má»™t há»™i nghá»‹
uy tÃ­n CIKM - International Conference on Information and Knowledge
Management Ä‘áº¡t rank A xuáº¥t báº£n vÃ o nÄƒm 2014. Thuáº­t toÃ¡n TwMinSwap chá»‰ yÃªu
cáº§u O(k) khÃ´ng gian bá»™ nhá»› vá»›i k lÃ  top k items cÃ³ Ä‘á»™ phá»• biáº¿n cao nháº¥t. Cuá»‘i
cÃ¹ng, chÃºng tÃ´i sáº½ trÃ¬nh bÃ y cÃ¡ch mÃ  thuáº­t toÃ¡n TwMinSwap Ä‘Æ°á»£c triá»ƒn khai vÃ o
há»‡ thá»‘ng thá»i gian thá»±c mÃ  chÃºng tÃ´i Ä‘ang xÃ¢y dá»±ng nhÆ° tháº¿ nÃ o.</p>
<h3>CÃ¡c má»¥c chÃ­nh trong chÆ°Æ¡ng:</h3>
<p><a href="#5.1">5.1. Giá»›i thiá»‡u</a></p>
<p><a href="#5.2">5.2. KÃ½ hiá»‡u Ä‘Æ°á»£c sá»­ dá»¥ng trong thuáº­t toÃ¡n khai thÃ¡c items</a></p>
<p><a href="#5.3">5.3. Thuáº­t toÃ¡n Ä‘á» xuáº¥t</a></p>
<p><a href="#5.4">5.4. ThÃ­ nghiá»‡m</a></p>
<p><a href="#5.5">5.5. Váº­n dá»¥ng</a></p>
<p><a href="#5.6">5.6. Tá»•ng káº¿t</a></p>
<h2><a name="5.1">5.1. Giá»›i thiá»‡u</a></h2>
<p>Khai thÃ¡c recent frequent items lÃ  má»™t bÃ i toÃ¡n con cá»§a khai thÃ¡c frequent items,
trong Ä‘Ã³ ta táº­p trung tÃ¬m ra nhá»¯ng frequent items má»›i xuáº¥t hiá»‡n vÃ  dáº§n loáº¡i bá» Ä‘i
nhá»¯ng frequent items Ä‘Ã£ cÅ©. Vá»›i ngá»¯ cáº£nh á»©ng dá»¥ng, bÃ i toÃ¡n nÃ y lÃ  phá»• biáº¿n. VÃ­ dá»¥,
khi ta theo dÃµi nhá»¯ng tá»« khÃ³a tá»« SNS, tháº­t lÃ  quan trá»ng Ä‘á»ƒ biáº¿t tá»« khÃ³a nÃ o lÃ  xu
hÆ°á»›ng má»›i vÃ  tá»« khÃ³a nÃ o lÃ  xu hÆ°á»›ng cÅ©. Nhiá»u nguyÃªn cá»©u tÃ¬m kiáº¿m nhá»¯ng recent
frequent items Ä‘Æ°á»£c nguyÃªn cá»©u. Tuy nhiÃªn, chÃºng bá»‹ giá»›i háº¡n vá» Ä‘á»™ chÃ­nh xÃ¡c, thá»i
gian cháº¡y, vÃ  sá»­ dá»¥ng bá»™ nhá»›.</p>
<p>VÃ o nÄƒm 2014, táº¡i há»™i nghá»‹ CIKM, Y.Lim, J.Choi vÃ  U.Kang Ä‘Ã£ Ä‘á» xuáº¥t má»™t
phÆ°Æ¡ng phÃ¡p nhanh, chÃ­nh xÃ¡c, vÃ  sá»­ dá»¥ng hiá»‡u quáº£ bá»™ nhá»› cho viá»‡c theo dÃµi recent
frequent items Ä‘Ã³ lÃ  thuáº­t toÃ¡n TwMinSwap [16]. Thuáº­t toÃ¡n TwMinSwap lÃ  phiÃªn
báº£n táº¥t Ä‘á»‹nh cá»§a thuáº­t toÃ¡n láº¥y máº«u TwSample mÃ  cÃ³ má»™t sá»± Ä‘áº£m báº£o tá»‘t vá» máº·t lÃ½
thuyáº¿t. Thuáº­t toÃ¡n TwMinSwap hoÃ n thiá»‡n TwSample cáº£ vá» tá»‘c Ä‘á»™ xá»­ lÃ½, Ä‘á»™ chÃ­nh
xÃ¡c vÃ  sá»­ dá»¥ng bá»™ nhá»›. Cáº£ hai chá»‰ yÃªu cáº§u O(k) khÃ´ng gian bá»™ nhá»› vÃ  khÃ´ng cáº§n biáº¿t
trÆ°á»›c vá» stream nhÆ° lÃ  chiá»u cá»§a nÃ³ hay sá»‘ lÆ°á»£ng items phÃ¢n biá»‡t trÃªn stream. Äáº·c
biá»‡t, thuáº­t toÃ¡n chá»‰ yÃªu cáº§u hai tham sá»‘ lÃ  k vÃ  ğ›¼ vÃ  sá»± Ä‘Æ¡n giáº£n nÃ y khÃ´ng chá»‰ cho
phÃ©p tiáº¿t kiá»‡m vÃ¹ng nhá»› mÃ  cÃ²n giáº£m thá»i gian xá»­ lÃ½ má»—i items (per-item processing
time). ThÃ­ nghiá»‡m chá»‰ ra, thuáº­t toÃ¡n TwMinSwap cháº¡y tá»‘t hÆ¡n nhá»¯ng thuáº­t toÃ¡n cáº¡nh
64
tranh khÃ¡c á»Ÿ nhá»¯ng khÃ­a cáº¡nh precision & recall, error trong time-weighted count, sá»­
dá»¥ng bá»™ nhá»› vÃ  thá»i gian xá»­ lÃ½ trong Báº£ng 5-1.</p>
<table border="1" align="center">
<tr>
<th></th>
<th colspan="2">[Recommended]</th>
<th colspan="2">Competitors</th>
</tr>
<tr>
<td></td>
<td>TwMinSwap [16]</td>
<td>TwSample [16]</td>
<td>TwFreq [28]</td>
<td>TwHCount [29]</td>
</tr>
<tr>
<td>Precision & Recall</td>
<td><b>Hightest</b></td>
<td>Low</td>
<td><del>Lowest</del></td>
<td>High</td>
</tr>
<tr>
<td>Error in TwHCount</td>
<td><b>Lowest</b></td>
<td>Medium</td>
<td><del>Highest</del></td>
<td><b>Lowest</b></td>
</tr>
<tr>
<td>Memory Usage</td>
<td><b>Smallest</b></td>
<td><del>Largest</del></td>
<td>Small</td>
<td><del>Largest</del></td>
</tr>
<tr>
<td>Time</td>
<td>Fast</td>
<td><del>Slowest</del></td>
<td>Medium</td>
<td><b>Fastest</b></td>
</tr>
</table>
<h4 align="center"><a name="tab05-01">Báº£ng 5-1: Báº£ng so sÃ¡nh giá»¯a TwMinSwap vá»›i cÃ¡c thuáº­t toÃ¡n khÃ¡c [16]</a></h4>
<h2><a name="5.2">5.2. KÃ½ hiá»‡u Ä‘Æ°á»£c sá»­ dá»¥ng trong thuáº­t toÃ¡n khai thÃ¡c items</a></h2>
<p>Báº£ng bÃªn dÆ°á»›i liá»‡t kÃª táº­p cÃ¡c kÃ½ hiá»‡u vÃ  mÃ´ táº£, nhá»¯ng kÃ½ hiá»‡u nÃ y Ä‘Æ°á»£c dÃ¹ng
xuyÃªn suá»‘t thuáº­t toÃ¡n sáº½ Ä‘Æ°á»£c trÃ¬nh bÃ y bÃªn dÆ°á»›i.</p>
<table  border="1" align="center">
<tr>
<th>KÃ½ hiá»‡u</th>
<th>MÃ´ táº£</th>
</tr>
<tr>
<td>L<br>N<br>k<br>$\alpha$<br>u,v<br>c,c<sub>u</sub><br>T<sub>u</sub><br>W(u)<br>P(u)<br>t,t<sub>i</sub>/t<sub>cur</sub><br>K<br>$\lambda$<br>$\sigma$
</td>
<td>Chiá»u dÃ i cá»§a stream<br>Sá»‘ lÆ°á»£ng items phÃ¢n biá»‡t<br>Sá»‘ lÆ°á»£ng (time-weighted) frequent items<br>Time decay factor<br>Äá»‹nh dáº¡ng cá»§a item<br>Sá»‘ Ä‘áº¿m
(cá»§a u)<br>Táº­p cÃ¡c má»‘c thá»i gian mÃ  u xáº£y ra<br>Time-weighted count cá»§a u<br>Penalized time-weighted count cá»§a u<br>thá»i Ä‘iá»ƒm/ thá»i Ä‘iá»ƒm hiá»‡n táº¡i<br>Táº­p cÃ¡c (time-weighted) frequent items Ä‘Ã£ khai thÃ¡c Ä‘Æ°á»£c
<br>Penalty term cho P(u)<br>Tá»‰ lá»‡ tÄƒng cá»§a $\lambda$
</td>
</tr>
</table>
<h4 align="center"><a name="tab05-02">Báº£ng 5-2: CÃ¡c kÃ½ hiá»‡u Ä‘Æ°á»£c dÃ¹ng trong chÆ°Æ¡ng nÃ y [16]</a></h4>
<h2><a name="5.3">5.3. Thuáº­t toÃ¡n Ä‘á» xuáº¥t</a></h2>
<p>TÃ¡c giáº£ Ä‘Ã£ Ä‘á» xuáº¥t 1 phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ tÃ¬m time-weighted top-k items má»™t cÃ¡ch
hiá»‡u quáº£ tá»« data stream lÃ  thuáº­t toÃ¡n TwMinSwap. Thuáº­t toÃ¡n TwMinSwap chá»‰ yÃªu
cáº§u O(k) khÃ´ng gian bá»™ nhá»› vá»›i k lÃ  sá»‘ time-weighted top-k items mÃ  ta muá»‘n tÃ¬m.
Thuáº­t toÃ¡n TwMinSwap Ä‘áº¡t Ä‘Æ°á»£c báº±ng cÃ¡ch derandomization tá»« thuáº­t toÃ¡n láº¥y máº«u
TwSample. Äá»ƒ phÃ¡t triá»ƒn thuáº­t toÃ¡n TwMinSwap, ta sáº½ trÃ¬nh bÃ y trÆ°á»›c vá» thuáº­t toÃ¡n
TwSample. Thuáº­t toÃ¡n TwSample cÃ³ sá»± Ä‘áº£m báº£o tá»‘t vá» máº·t lÃ½ thuyáº¿t. Tuy nhiÃªn, Ä‘áº·c
Ä‘iá»ƒm xÃ¡c xuáº¥t cá»§a TwSample yÃªu cáº§u nhiá»u session láº¥y máº«u khÃ´ng phá»¥ thuá»™c Ä‘á»ƒ Ä‘áº¡t
Ä‘Æ°á»£c Ä‘á»™ chÃ­nh xÃ¡c cao, dáº©n tá»›i khÃ´ng gian sá»­ dá»¥ng bá»™ nhá»› lá»›n vÃ  thá»i gian cháº¡y
cháº­m. Máº·t khÃ¡c, TwMinSwap Ä‘áº¡t Ä‘Æ°á»£c Ä‘á»™ chÃ­nh xÃ¡c cao vá»›i thá»i gian cháº¡y nhanh
trong khi chá»‰ sá»­ dá»¥ng session Ä‘Æ¡n.</p>
<p>Äá»‹nh nghÄ©a 1: (Time-Weighted Count). Cho u lÃ  1 item xáº£y ra táº¡i thá»i Ä‘iá»ƒm
t1,t2,â€¦,tc. Time-weighted count cá»§a item u Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bá»Ÿi cÃ´ng thá»©c sau vÃ  :$$W(u) = \sum_{i=1}^{c}\alpha^{t_{cur}-t_{i}}$$</p>
<ul>
<li>a lÃ  decay paremeter</li>
<li>$t_{cur}$ lÃ  thá»i Ä‘iá»ƒm hiá»‡n táº¡i</li>
</ul>
<h3 class="subheader1">5.3.1. Thuáº­t toÃ¡n ngáº«u nhiÃªn TwSample</h3>
<p>Äá»ƒ phÃ¡t triá»ƒn 1 thuáº­t toÃ¡n láº¥y máº«u, Ä‘áº§u tiÃªn ta Ä‘á»‹nh nghÄ©a penalized time-weighted
count nhÆ° bÃªn dÆ°á»›i</p>
<p>Äá»‹nh nghÄ©a 2: (Penalized Time-Weighted Count). Cho u lÃ  1 item xáº£y ra trong
data stream vÃ  Tu lÃ  táº­p cÃ¡c thá»i Ä‘iá»ƒm mÃ  u xáº£y ra. Penalized time-weighted count
cá»§a u Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a bá»Ÿi: $$W(u) = \sum_{i \in T_{u}}\alpha^{t_{cur}-t_{i}+\lambda -1}$$</p>
<ul>
<li>a lÃ  decay paremeter</li>
<li>$t_{cur}$ lÃ  thá»i Ä‘iá»ƒm hiá»‡n táº¡i</li>
<li>$\lambda$ lÃ  penalty term cho items vá»«a tá»›i</li>
</ul>
<table border="1" align="center">
<tr>
<th>Thuáº­t toÃ¡n 3: TwSample: Randomized Time-Weighted Counting</th>
</tr>
<tr>
<td><b>Input</b>: Stream S, k sá»‘ k items Ä‘Æ°á»£c theo dÃµi, tham sá»‘ decay $\alpha$ tá»‰ lá»‡
tÄƒng $\sigma$ cá»§a penalty term.<br> 1&#8195;&#8195;$\lambda \gets 1$;<br> 2&#8195;&#8195;K$\gets \emptyset$;<br> 3&#8195;&#8195;foreach item má»›i u tá»« S do
<br> 4&#8195;&#8195;&#8195;&#8195;Downsampling($\alpha$);<br> 5&#8195;&#8195;&#8195;&#8195;if bernoulli($\alpha^{\lambda-1}$) = 1 then
<br> 6&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;if u $\in$ K then $c_{u} \gets c_{u} +1$;<br> 7&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;else
<br> 8&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;K $\gets K\cup${u};<br> 9&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;$c_{u} \gets 1$;
<br> 10&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;endif<br> 11&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;while |K| < k do
<br> 12&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;$\lambda \gets \lambda + \sigma$;<br> 13&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;Downsampking($\alpha^{\sigma}$);
<br> 14&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;endwhile<br> 15&#8195;&#8195;&#8195;&#8195;endif<br> 16&#8195;&#8195;endfor
<br> 17&#8195;&#8195;Thá»§ tá»¥c Dowmsampling($\theta$)<br> 18&#8195;&#8195;foreach v $\in$ K vá»›i sá»‘ Ä‘áº¿m $c_{v}$ do
<br> 19&#8195;&#8195;&#8195;&#8195;$c_{v} \gets binomial(c_{v},\theta)$;<br> 20&#8195;&#8195;&#8195;&#8195;if $c_{v}$ = 0 then
<br> 21&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;K $\gets$ K\{v};<br> 22&#8195;&#8195;&#8195;&#8195;endif<br> 23&#8195;&#8195;endfor
</td>
</tr>
</table>
<h4 align="center">Thuáº­t toÃ¡n 3: thuáº­t toÃ¡n TwSample[14]</h4>
<p>Thuáº­t toÃ¡n TwSample lÃ  thuáº­t toÃ¡n dá»±a trÃªn láº¥y máº«u (sampling based algorithm).
Má»™t chÃºt vá» thuáº­t toÃ¡n dá»±a trÃªn láº¥y máº«u, thuáº­t toÃ¡n sáº½ xem nhá»¯ng items trÃªn 1 stream
nhÆ° lÃ  nhá»¯ng máº«u thá»­ (sample). Khi 1 item tá»›i, thuáº­t toÃ¡n sáº½ láº¥y máº«u (sample) item
Ä‘Ã³ theo xÃ¡c xuáº¥t. Náº¿u láº¥y máº«u thÃ nh cÃ´ng, item Ä‘Æ°á»£c ghi nháº­n lÃ  Ä‘Ã£ xuáº¥t hiá»‡n táº¡i thá»i
Ä‘iá»ƒm Ä‘Ã³. Náº¿u tháº­t báº¡i, bá» luÃ´n item Ä‘Ã³ vÃ  thuáº­t toÃ¡n khÃ´ng nhá»› gÃ¬ vá» sá»± xuáº¥t hiá»‡n cá»§a
nÃ³. Nhá»¯ng item cÃ³ Ä‘á»™ phá»• biáº¿n cÃ ng cao thÃ¬ cÃ ng dá»… Ä‘Æ°á»£c láº¥y máº«u vÃ  ngÆ°á»£c láº¡i. Cho
má»™t chuá»—i cÃ¡c items cho Ä‘áº¿n thá»i Ä‘iá»ƒm $t_{cur}$ lÃ  $u_{1},...,u_{t_{cur}}$ vÃ  $0<\alpha\leq 1$ vÃ  $\lambda \geq 1$, thuáº­t
toÃ¡n TwSample láº¥y máº«u má»—i item u<sub>t</sub> vá»›i xÃ¡c xuáº¥t $\alpha^{t_{cur}-t+\lambda -1}$. Khi Î» cÃ ng tÄƒng thÃ¬ xÃ¡c
xuáº¥t láº¥y máº«u thÃ nh cÃ´ng cÃ ng giáº£m. Äá»ƒ duy trÃ¬ viá»‡c theo dÃµi top-k frequent items chá»‰
vá»›i O(k) khÃ´ng gian bá»™ nhá»›, khi sá»‘ lÆ°á»£ng item Ä‘ang theo dÃµi vÆ°á»£t quÃ¡ k thÃ¬ thuáº­t toÃ¡n
TwSample buá»™c pháº£i loáº¡i bá» Ä‘i nhá»¯ng item Ã­t xuáº¥t hiá»‡n nháº¥t. Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y,
thuáº­t toÃ¡n TwSample cháº¡y 1 thá»§ tá»¥c Ä‘Æ°á»£c gá»i lÃ  downsampling. Thá»§ tá»¥c
downsampling sáº½ tiáº¿n háº¡nh láº¥y máº«u láº¡i nhá»¯ng items Ä‘Ã£ theo dÃµi dá»±a theo counter cá»§a
item Ä‘Ã³ theo xÃ¡c xuáº¥t $\alpha^{\sigma}$ vÃ  sáº½ loáº¡i bá» Ä‘i nhá»¯ng item khÃ´ng xuáº¥t hiá»‡n láº§n nÃ o táº¡i láº§n
láº¥y máº«u láº¡i nÃ y.</p>
<p>Má»™t cÃ¡ch chi tiáº¿t, Thuáº­t toÃ n TwSample yÃªu cáº§u 3 tham sá»‘: k lÃ  sá»‘ items tá»‘i Ä‘a
Ä‘Æ°á»£c theo dÃµi, time-weighting factor $\alpha$ vÃ  Ä‘á»™ tÄƒng $\sigma$ cho penalty term Î». CÃ²n cÃ³ 3
loáº¡i thÃ´ng tin Ä‘Æ°á»£c cáº­p nháº­t tÄƒng dáº§n: penalty term Î», táº­p K cá»§a cÃ¡c items Ä‘Æ°á»£c theo
dÃµi, vÃ  counter c<sub>v</sub> Ä‘Æ°á»£c liÃªn káº¿t vá»›i má»—i v $\in$ K. Khá»Ÿi táº¡o, Î» = 1 vÃ  K = âˆ…. Khi má»™t
item má»›i u tá»›i, u Ä‘Æ°á»£c láº¥y máº«u vá»›i xÃ¡c xuáº¥t $\alpha^{\lambda -1}$. Trong khi u Ä‘Æ°á»£c láº¥y máº«u thÃ nh
cÃ´ng, náº¿u u âˆˆ k, counter c<sub>u</sub> Ä‘Æ°á»£c tÄƒng thÃªm 1, ngÆ°á»£c láº¡i u Ä‘Æ°á»£c thÃªm vÃ o táº­p K vá»›i
counter cu =1. Sau khi láº¥y máº«u, Náº¿u |K| > k, Î» Ä‘Æ°á»£c tÄƒng 1 lÆ°á»£ng $\sigma$ vÃ  thá»±c hiá»‡n
downsampling. Cá»¥ thá»ƒ cho downsampling, má»—i v $\in$ K, c<sub>v</sub> Ä‘Æ°á»£c cáº­p nháº­t bá»Ÿi 1 con sá»‘
Ä‘Æ°á»£c tráº£ vá» tá»« hÃ m xÃ¡c xuáº¥t binomial($c_{v},\alpha^{\sigma}$). Náº¿u ğ‘ trá» thÃ nh 0, v Ä‘Æ°á»£c loáº¡i bá»
khá»i K. QuÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c láº­p láº¡i cho tá»›i khi |K| $\geq$ k. Cuá»‘i cÃ¹ng, trÆ°á»›c má»—i láº§n 1
item má»›i tá»›i thÃ¬ TwSample sáº½ downsampling táº¥t cáº£ item trong K trÆ°á»›c khi xá»­ lÃ½ item
má»›i Ä‘Ã³.</p>
<p><b>Hiá»‡u quáº£ cá»§a $\sigma$</b>, Thá»±c cháº¥t, $\sigma$ xÃ¡c Ä‘á»‹nh tá»‘c Ä‘á»™ láº¥y máº«u cho viá»‡c loáº¡i bá» nhá»¯ng
items Ä‘ang theo dÃµi Ä‘á»ƒ mÃ  sá»‘ items trong K khÃ´ng vÆ°á»£t quÃ¡ k. Khi $\sigma$ nhá», tá»•ng lÆ°á»£ng
counter cá»§a cÃ¡c items giáº£m táº¡i dÃ²ng 14, dáº©n tá»›i cáº§n thá»i gian dÃ i cho quÃ¡ trÃ¬nh loáº¡i
bá» táº¡i dÃ²ng 12-15. Äá»™ chÃ­nh xÃ¡c cÃ³ thá»ƒ tÄƒng vÃ¬ khÃ´ng loáº¡i bá» hÆ¡n yÃªu cáº§u. Máº·t khÃ¡c,
khi $\sigma$ lá»›n, quÃ¡ trÃ¬nh loáº¡i bá» káº¿t thÃºc nhanh, máº·t dÃ¹ Ä‘á»™ chÃ­nh xÃ¡c cÃ³ thá»ƒ giáº£m vÃ¬ ta cÃ³
thá»ƒ loáº¡i bá» nhiá»u hÆ¡n má»™t item.</p>
<p>Lemma 1: Táº¡i thá»i Ä‘iá»ƒm tcur vá»›i penalty term Î» , má»—i item u xáº£y ra táº¡i thá»i Ä‘iá»ƒm
t $\leq$ t<sub>cur</sub> Ä‘Æ°á»£c láº¥y máº«u vá»›i xÃ¡c xuáº¥t$$Pr(u \; Ä‘Æ°á»£c \; láº¥y \; máº«u) = \alpha^{t_{cur}-t+\lambda -1}$$</p>
<p>Chá»©ng minh: Cho u lÃ  item má»›i táº¡i thá»i Ä‘iá»ƒm t = 1 vÃ  t<sub>cur</sub> = 1. U Ä‘Æ°á»£c láº¥y máº«u
vá»›i xÃ¡c xuáº¥t $\alpha^{t_{cur}-t+\lambda -1}$ = 1.</p>
<p>Cho t<sub>cur</sub> >=1. Giáº£ sá»­ lemma Ä‘Ãºng cho thá»i Ä‘iá»ƒm t<sub>cur</sub>. Äiá»u nÃ y tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i
cho má»—i u táº¡i thá»i Ä‘iá»ƒm t $\leq t_{cur}$, u Ä‘Æ°á»£c láº¥y máº«u vá»›i kháº£ nÄƒng $\alpha^{t_{cur}-t+\lambda -1}$. Ta chá»©ng
minh lemma Ä‘Ãºng táº¡i thá»i Ä‘iá»ƒm t<sub>next</sub> = t<sub>cur</sub> +1. á»œ dÃ²ng 4, táº¥t cáº£ máº«u thá»­ Ä‘Æ°á»£c
downsample vá»›i xÃ¡c xuáº¥t $\alpha$. Äiá»u nÃ y cÃ³ nghÄ©a ráº±ng sau dÃ²ng 4, nhá»¯ng máº«u thá»­ cÃ²n
láº¡i Ä‘Æ°á»£c láº¥y vá»›i xÃ¡c xuáº¥t $\alpha^{t_{cur}-t+\lambda -1+1}$ mÃ  trÃ¹ng vá»›i xÃ¡c xuáº¥t láº¥y máº«u táº¡i thá»i Ä‘iá»ƒm
t<sub>next</sub> = t<sub>cur</sub> +1 cá»§a lemma 1.</p>
<p>Tiáº¿p theo, ta kiá»ƒm tra dÃ²ng 5 tá»›i 11. Cho u lÃ  item má»›i tá»›i táº¡i thá»i Ä‘iá»ƒm t = t<sub>next</sub>.
RÃµ rÃ ng, u Ä‘Æ°á»£c láº¥y máº«u vá»›i xÃ¡c xuáº¥t $\alpha^{t_{cur}-t+\lambda -1}$ = 1 bá»Ÿi dÃ²ng 5, khÃ´ng quan
tÃ¢m u cÃ³ Ä‘Æ°á»£c theo dÃµi hay khÃ´ng. Ta sáº½ kiá»ƒm tra downsampling. Coi d lÃ  sá»‘ vÃ²ng
láº·p cá»§a cáº­u lá»‡nh while táº¡i dÃ²ng 12. Sau Ä‘Ã³, sau khi downsampling, má»—i máº«u thá»­ Ä‘Æ°á»£c
láº¥y máº«u láº¡i vá»›i xÃ¡c xuáº¥t $\alpha^{d\sigma}$, vÃ  nhÆ° váº­y má»—i máº«u thá»­ Ä‘Æ°á»£c láº¥y vá»›i xÃ¡c xuáº¥t
$\alpha^{t_{cur}-t+\lambda +d\sigma -1}$  mÃ  trÃ¹ng vá»›i xÃ¡c xuáº¥t láº¥y máº«u táº¡i thá»i Ä‘iá»ƒm t<sub>next</sub> = t<sub>cur</sub>+1 cá»§a lemma
1 vá»›i Î» = Î» + dğœ.</p>
<p>LÆ°u Ã½ ráº±ng kháº£ nÄƒng láº¥y máº«u khÃ´ng tÄƒng theo thá»i gian vÃ¬ Î» chá»‰ tÄƒng chá»© khÃ´ng
giáº£m. Do Ä‘Ã³, má»™t item khÃ´ng Ä‘Æ°á»£c láº¥y máº«u táº¡i thá»i Ä‘iá»ƒm nÃ o Ä‘Ã³ sáº½ khÃ´ng Ä‘Æ°á»£c láº¥y
máº«u trong tÆ°Æ¡ng lai. $\Box$</p>
<p>Há»‡ luáº­n bÃªn dÆ°á»›i cÃ³ Ä‘Æ°á»£c trá»±c tiáº¿p tá»« Lemma 1:</p>
<p><b>Há»‡ luáº­n 1</b>: Táº¡i báº¥t kÃ¬ thá»i tcur nÃ o trong TwSample, kÃ¬ vá»ng cá»§a counter c<sub>u</sub> cá»§a
item u Ä‘Æ°á»£c theo dÃµi u âˆˆ K lÃ :$$E(c_{u}) = P(u) = \sum_{t\in T_{u}}\alpha^{t_{cur}-t+\lambda +1}$$</p>
<p>Vá»›i T<sub>u</sub> lÃ  táº­p nhá»¯ng thá»i Ä‘iá»ƒm mÃ  u xáº£y ra.</p>
<p><b>Lemma 2</b>: Táº¡i báº¥t kÃ¬ thá»i Ä‘iá»ƒm nÃ o, xÃ¡c xuáº¥t pu vá»›i u lÃ  item Ä‘Æ°á»£c theo dÃµi thá»a
mÃ£n báº¥t Ä‘áº³ng thá»©c bÃªn dÆ°á»›i:$$P(u) \geq 1 - exp(-P(u)/2)$$</p>
<p>Chá»©ng minh: LÆ°u Ã½ ráº±ng p<sub>u</sub>= Pr[c<sub>u</sub> >0] vÃ¬ c<sub>u</sub> = $\sum_{i=1}^{|T_{u}|}c_{u}(i)$ lÃ  má»™t biáº¿n ngáº«u nhiÃªn
vá»›i cu(i) xÃ¡c Ä‘á»‹nh sá»± xuáº¥t hiá»‡n thá»© I cá»§a u cÃ³ Ä‘Æ°á»£c láº¥y máº«u khÃ´ng. Ãp dá»¥ng <b>Chernoff
bound</b>, ta Ä‘áº¡t Ä‘Æ°á»£c báº¥t Ä‘áº³ng thá»©c bÃªn dÆ°á»›i: $$P_{u} = Pr[c_{u} > 0] = 1 â€“ Pr[c_{u} = 0] >= 1 â€“ exp(-E[c_{u}]/2)$$</p>
<p>VÃ¬ E[cu] = P(u) bá»Ÿi há»‡ luáº­n 1, Lemma Ä‘Æ°á»£c chá»©ng minh. $\Box$</p>
<p>Lemma 2 phÃ¡t biá»ƒu ráº±ng 1 item lÃ  Ã­t quan trá»ng hÆ¡n, kháº£ nÄƒng nÃ³ khÃ´ng Ä‘Æ°á»£c
theo dÃµi tÄƒng theo hÃ m sá»‘ mÅ©.</p>
<p>Máº·c dÃ¹ TwSample lÃ  Ä‘Æ¡n giáº£n vÃ  cung cáº¥p má»™t sá»± Ä‘áº£m báº£o vá» lÃ½ thuyáº¿t cho káº¿t
quáº£ cá»§a nÃ³, nhÆ°ng hiá»‡u nÄƒng cá»§a nÃ³ bá»‹ suy giáº£m vÃ¬ tÃ­nh cháº¥t cá»§a xÃ¡c xuáº¥t. Äáº§u tiÃªn,
thá»i gian cháº¡y trá»Ÿ nÃªn cháº­m vÃ¬ sá»‘ vÃ²ng láº·p cho downsampling vá»›i k tÄƒng khÃ´ng cá»‘
Ä‘á»‹nh vÃ  thá»i gian cho viá»‡c láº¥y Ä‘Æ°á»£c biáº¿n ngáº«u nhiÃªn tá»« hÃ m binomial(c, Î¸) phá»¥ thuá»™c
vÃ o c. Thá»© hai, top k-items tÃ¬m Ä‘Æ°á»£c vÃ  counter c tÆ°Æ¡ng á»©ng cÃ³ thá»ƒ khÃ´ng chÃ­nh xÃ¡c
vÃ¬ Î» lá»›n khÃ´ng thá»ƒ kiá»ƒm soÃ¡t. Sá»± khÃ´ng chÃ­nh xÃ¡c nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c giáº£i quyáº¿t báº±ng
duy trÃ¬ s sessions Ä‘á»™c láº­p mÃ  má»—i session theo dÃµi k items, nhÆ°ng nÃ³ dáº©n tá»›i tá»‘n nhiá»u
khÃ´ng gian bá»™ nhá»› vÃ  thá»i gian cháº¡y. Trong má»¥c tiáº¿p theo, biáº¿n thá»ƒ táº¥t Ä‘á»‹nh cá»§a
TwSample Ä‘Æ°á»£c Ä‘á» xuáº¥t mÃ  nÃ³ lÃ  nhanh vÃ  yÃªu cáº§u 1 session Ä‘Æ¡n cá»§a kÃ­ch thÆ°á»›c k.</p>
<h3 class="subheader1">5.3.2. Thuáº­t toÃ¡n táº¥t Ä‘á»‹nh TwMinSwap</h3>
<p>Thuáº­t toÃ¡n TwMinSwap Ä‘Æ°á»£c Ä‘á» xuáº¥t nhÆ° lÃ  má»™t phiÃªn báº£n táº¥t Ä‘á»‹nh
(derterministic) cá»§a thuáº­t toÃ¡n TwSample. Thuáº­t toÃ¡n TwMinSwap khai thÃ¡c 1 cÃ¡ch
hiá»‡u quáº£ top-k time-weighted frequent items.</p>
<table  border="1" align="center">
<tr>
<th>Thuáº­t toÃ¡n 4: TwMinSwap: Deterministic Time-Weighted Counting</th>
</tr>
<tr>
<td><b>Input</b>: Stream S, k sá»‘ items Ä‘Æ°á»£c theo dÃµi, tham sá»‘ decay $\alpha$<br> 1&#8195;&#8195;K $\gets \emptyset$;
<br> 2&#8195;&#8195;$t_{cur} \gets$ 0;<br> 3&#8195;&#8195;foreach item má»›i u tá»« S do<br> 4&#8195;&#8195;&#8195;&#8195;$t_{cur} \gets t_{cur} +1$;
<br> 5&#8195;&#8195;&#8195;&#8195;foreach v $\in$ K do<br> 6&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;$c_{v} \gets c_{v} x \alpha$;
<br> 7&#8195;&#8195;&#8195;&#8195;endfor<br> 8&#8195;&#8195;&#8195;&#8195;if u $\in$ K then<br> 9&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;$c_{u} \gets c_{u} +1$;
<br> 10&#8195;&#8195;&#8195;&#8195;else if |K| < k then<br> 11&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;K $\gets K \cup${u};
<br> 12&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;$c_{u} \gets 1$;<br> 13&#8195;&#8195;&#8195;&#8195;else<br> 14&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;$v^{*} \gets argmin_{v \in K}c_{v}$
<br> 15&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;if $c_{v^{*}}$ < 1 then<br> 16&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;K $\gets$ K\{v*}$\cup${u};
<br> 17&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;$c_{u} \gets 1$;<br> 18&#8195;&#8195;&#8195;&#8195;&#8195;&#8195;endif
<br> 19&#8195;&#8195;&#8195;&#8195;endif<br> 20&#8195;&#8195;endfor
</td>
</tr>
</table>
<h4 align="center">Thuáº­t toÃ¡n 4: thuáº­t toÃ¡n TwMinSwap [14]</h4>
<p>Ã tÆ°á»Ÿng chÃ­nh lÃ  viá»‡c lÆ°u trá»¯ sá»‘ kÃ¬ vá»ng cá»§a máº«u thá»­ cho má»—i item má»™t cÃ¡ch trá»±c
tiáº¿p thay vÃ¬ Ã¡p dá»¥ng quÃ¡ trÃ¬nh ngáº«u nhiÃªn. Cá»¥ thá»ƒ, cho 1 item u xáº£y ra táº¡i thá»i Ä‘iá»ƒm
t$\leq t_{cur}$, thay vÃ¬ tÄƒng cu bá»Ÿi 1 vá»›i xÃ¡c xuáº¥t $\alpha^{t_{cur}-t}$, ta tÄƒng c<sub>u</sub> bá»Ÿi $\alpha^{t_{cur}-t}$ vá»›i xÃ¡c xuáº¥t
1. Sau Ä‘Ã³, downsampling vá»›i tá»‘c Ä‘á»™ Î¸ trá»Ÿ thÃ nh cv = cv Î¸, cho má»—i item Ä‘Æ°á»£c theo
dÃµi v âˆˆ K. Tuy nhiÃªn, Ä‘á»‘i vá»›i tÃ¬nh huá»‘ng táº¥t Ä‘á»‹nh nÃ y, ta gáº·p pháº£i má»™t váº¥n Ä‘á» khi táº¥t
cáº£ counters trá»Ÿ lÃªn Ä‘áº§y. Cá»¥ thá»ƒ, vÃ¬ sá»‘ kÃ¬ vá»ng cho item xuáº¥t hiá»‡n Ã­t nháº¥t má»™t láº§n trÃªn
data stream khÃ´ng bao giá» trá» vá» 0, nÃ³ cáº§n Ä‘Æ°á»£c cáº¯t Ä‘i Ä‘á»ƒ loáº¡i bá» item Ä‘ang theo dÃµi
mÃ  khÃ´ng trá»ng báº±ng má»™t item má»›i. Thuáº­t toÃ¡n TwMinSwap Ä‘á» xuáº¥t má»™t heuristic
Ä‘Æ¡n giáº£n cho viá»‡t cáº¯t Ä‘i mÃ  khÃ´ng yÃªu cáº§u thÃªm khÃ´ng gian bá»™ nhá»›, dáº©n tá»›i sá»­ dá»¥ng
bá»™ nhá»› tháº¥p khi so sÃ¡nh vá»›i cÃ¡c cÃ¡ch tiáº¿p cáº­n khÃ¡c [5, 26, 27]. LÆ°u Ã½ ráº±ng phÆ°Æ¡ng
thá»©c cáº¯t á»Ÿ Ä‘Ã¢y tÆ°Æ¡ng á»©ng vá»›i viá»‡c giáº£m tá»‘c Ä‘á»™ láº¥y máº«u bá»Ÿi viá»‡c tÄƒng Î» trong
TwSample.</p>
<p>Chi tiáº¿t cá»§a heuristic cho viá»‡c cáº¯t tá»‰a Ä‘Æ°á»£c bÃ n luáº­n bÃªn dÆ°á»›i. Cho K lÃ  má»™t táº­p
items hiá»‡n táº¡i Ä‘Æ°á»£c theo dÃµi vá»›i |K| = k, vÃ  u lÃ  item vá»«a tá»›i tá»« data stream. PhÆ°Æ¡ng
thá»©c cáº¯t tá»‰a Ä‘áº§u tiÃªn tÃ¬m má»™t item v* âˆˆ K cÃ³ time-weighted count tá»‘i thiá»ƒu $c_{v^{*}}$ = $min_{c\in K}c^{*}$
Náº¿u c* < 1, ta bá» $c_{v^{*}}$ vÃ  báº¯t Ä‘áº§u theo dÃµi u vá»›i count khá»Ÿi táº¡o lÃ  1; ngÆ°á»£c
láº¡i, u Ä‘Æ°á»£c bá» qua. Sá»± trao Ä‘á»•i giá»¯a u vÃ  ğ‘£ lÃ  hiá»ƒu Ä‘Æ°á»£c vÃ¬ 1 lÃ  count cá»§a u khi má»›i
vá»«a Ä‘Æ°á»£c khá»Ÿi táº¡o vÃ  náº¿u $c_{v^{*}}\geq 1$ thÃ¬ lÃºc nÃ y náº¿u u náº±m trong K thÃ¬ sáº½ bá»‹ xÃ³a vÃ¬ c<sub>u</sub> lÃ 
count tháº¥p nháº¥t trong K dáº©n tá»›i viá»‡c theo dÃµi u lÃ  khÃ´ng cáº§n thiáº¿t; Ä‘iá»u nÃ y giáº£i thÃ­ch
táº¡i sao u láº¡i bá»‹ bá» qua khi $c_{v^{*}}\geq 1$ vÃ  viá»‡c trÃ¡o Ä‘á»•i chá»‰ Ä‘Æ°á»£c thá»±c hiá»‡n khi $c_{v^{*}}< 1$.</p>
<p>Äiá»ƒm máº¡nh cá»§a TwMinSwap tá»•ng káº¿t láº¡i bÃªn dÆ°á»›i. Äáº§u tiÃªn, bá»™ nhá»› mÃ  nÃ³ sá»±
dá»¥ng lÃ  nhá». Cho má»—i item, chá»‰ Ä‘á»‹nh danh (id) vÃ  time-weighted count cá»§a nÃ³ Ä‘Æ°á»£c
duy trÃ¬. Thá»© hai, TwMinSwap yÃªu cáº§u tham sá»‘ tá»‘i thiá»ƒu: k vÃ  ğ›¼ Äiá»u nÃ y Ä‘áº·c biá»‡t
thuáº­n lá»£i cho viá»‡c giáº£m ná»• lá»±c Ä‘iá»u chá»‰nh tham sá»‘ trong thá»±c táº¿. Thá»© ba, trÃ¡i vá»›i
TwSample, TwMinSwap Ä‘áº£m báº£o output k items miá»ƒn lÃ  N $\geq$ k.</p>
<p>Thá»i gian xá»­ lÃ½ má»—i item. CÃ³ hai phÃ©p toÃ¡n tá»‘n thá»i gian cháº¡y lÃ : (1) tÃ¬m item
vá»›i count tá»‘i thiá»ƒu, vÃ (2) nhÃ¢n ğ vá»›i táº¥t cáº£ counters cá»§a táº¥t cáº£ items trong K. Cáº£ 2
phÃ©p toÃ¡n Ä‘iá»u tá»‘n O(k) thá»i gian cháº¡y. Váº­y, TwMinSeap yÃªu cáº§u O(k) thá»i gian cháº¡y
cho má»—i vÃ²ng láº·p.</p>
<h3 class="subheader1">5.3.3. PhÃ¢n tÃ­ch thuáº­t toÃ¡n TwMinSwap</h3>
<p>Ta sáº½ phÃ¢n tÃ­ch TwMinSwap vá» Ä‘iá»u kiá»‡n khi nÃ o item Ä‘Æ°á»£c theo dÃµi khÃ´ng bá»‹
loáº¡i khá»i K. Má»™t cÃ¡ch chÃ­nh xÃ¡c hÆ¡n, Lemma 3 vÃ  4 phÃ¡t biá»ƒu ráº±ng TwMinSwap sáº½
khÃ´ng loáº¡i bá» nhá»¯ng items mÃ  sá»‘ láº§n xuáº¥t hiá»‡n cá»§a nÃ³ trÃªn má»™t ngÆ°á»¡ng nÃ o Ä‘Ã³ cho
cáº£ trÆ°á»ng data chung chung vÃ  trÆ°á»ng há»£p phÃ¢n phá»‘ lÅ©y thá»«a.</p>
<p>Lemma 3: Cho 0 < $\alpha$ â‰¤ 1 lÃ  tham sá»‘ time-decay cá»§a TwMinSwap. Báº¥t kÃ¬ item
vá»›i c $\geq$ 1 sáº½ khÃ´ng bá»‹ loáº¡i bá» khá»i K náº¿u nÃ³ xuáº¥t hiá»‡n Ã­t nháº¥t má»™t láº§n má»—i 1-log<sub>Î±</sub>Î³ nÆ¡i
Î³ = min {1+Î±,c}.</p>
<p>Chá»©ng minh: Giáº£ sá»­ v âˆˆ K vá»›i count $c_{v} = c \geq 1$ táº¡i má»‘c thá»i gian t vÃ  nÃ³ xuáº¥t
hiá»‡n má»™t láº§n má»—i d thá»i gian. Ta Ä‘á»‹nh nghÄ©a hÃ m bÃªn dÆ°á»›i:$$g(r+1) = (g(r)Î± + 1)Î±^{d-1}$$</p>
<ul>
<li>r lÃ  sá»‘ láº§n mÃ  v xuáº¥t hiá»‡n ká»ƒ tá»« má»‘c thá»i gian t</li>
<li>g(r) cho biáº¿t $c_{v}$ táº¡i láº§n thá»© r mÃ  v xuáº¥t hiá»‡n tá»« má»‘c thá»i gian t. Cá»¥ thá»ƒ, g(1)
= $cÎ±^{d-1}$ vÃ  g(r) = $c_{v}$ sau rd-1 thá»i gian ká»ƒ tá»« má»‘c thá»i gian t.</li>
</ul>
<p>Ta sáº½ chá»©ng minh g(r) $\geq$ 1 vá»›i d $\leq$ 1-log<sub>Î±</sub>Î³ vá»›i má»—i r $\leq$ 1 nÆ¡i Î³ = min {1+Î±,c}.
TrÆ°á»ng há»£p r = 1, giáº£ sá»­ ráº±ng c $\leq$ 1 + Î±, thÃ¬ $$g(1) = c\alpha ^{d-1} \leq c\alpha ^{log_{\alpha}c}=1$$</p>
<p>Giáº£ sá»­ ráº±ng c > 1 + Î± thÃ¬$$g(1) = c \alpha^{d-1} \geq (1+\alpha)\alpha^{d-1} \geq (1+\alpha)\alpha^{log_{\alpha}(1+\alpha)}$$</p>
<p>TrÆ°á»ng há»£p r > 1, giáº£ sá»­ ráº±ng g(r-1) >=1 thÃ¬ $$g(r) = (g(r-1)\alpha +1)\alpha^{d-1}\geq (\alpha+1)\alpha^{d-1} \geq min\{1+\alpha,c\}x \alpha^{1-log_{\alpha}min\{1+\alpha,c\}}$$</p>
<p><b>Lemma 4</b>: Cho n lÃ  sá»‘ items vÃ  phÃ¢n phá»‘i cá»§a items lÃ  phÃ¢n lÅ©y thá»«a cÆ¡ sá»‘ 2. Báº¥t
kÃ¬ item Ä‘Æ°á»£c theo dÃµi $i \leq \sqrt{1-log_{\alpha}(1+\alpha)/1.7}$ vá»›i count $c_{i} \geq \alpha^{\big(1-1.7i^{2}\big)}$ Ä‘Æ°á»£c kÃ¬
vá»ng lÃ  khÃ´ng bá»‹ loáº¡i bá».</p>
<p>Chá»©ng minh: Cho item i âˆˆ [1,n], kháº£ nÄƒng mÃ  nÃ³ xáº£y ra trÃªn stream lÃ  $$Pr[i\;xáº£y\;ra] = i^{-2}/Z$$</p>
<p>NÆ¡i Z lÃ  normalization constant. Do Ä‘Ã³, giÃ¡ trá»‹ kÃ¬ vá»ng cá»§a item xuáº¥t hiá»‡n trÆ°á»›c
i lÃ  $i^{2}Z$.</p>
<p>Giáº£ sá»­ ráº±ng c<sub>i</sub> â‰¤ Î± + 1. Báº¥t Ä‘áº±ng thá»©c bÃªn dÆ°á»›i Ä‘áº£m báº£o kÃ¬ vá»ng mÃ  i sáº½ khÃ´ng
bá»‹ loáº¡i bá» bá»Ÿi Lemma 3: $$1 - log_{\alpha}c_{i} \geq i^{2}Z \Leftrightarrow 1-i^{2}Z \geq log_{\alpha}c_{i} \Leftrightarrow \alpha^{1-i^{2}Z} \leq c_{i} \Leftrightarrow \alpha^{1-i^{2}Z} \leq \alpha +1 \Leftrightarrow i \leq \sqrt{\frac{1-log_{\alpha}(1+\alpha)}{Z}} $$</p>
<p>Gá»‰a sá»­ $c_{i} >$ Î± + 1. Báº¥t Ä‘áº±ng thá»©c bÃªn dÆ°á»›i Ä‘áº£m báº£o kÃ¬ vá»ng mÃ  i sáº½ khÃ´ng bá»‹ loáº¡i
bá» bá»Ÿi Lemma 3: $$1-log_{\alpha}(1+\alpha) \geq i^{2}Z \Leftrightarrow i \geq \sqrt{\frac{1-log_{\alpha}(1+\alpha)}{Z}}$$</p>
<p>Cuá»‘i cÃ¹ng, $Z \leq \sum_{j=1}^{\infty}j^{-2} = \frac{\pi^{2}}{6} $, chá»©ng minh Ä‘Ã£ hoÃ n thÃ nh.</p>
<h2><a name="5.4">5.4. ThÃ­ nghiá»‡m</a></h2>
<p>Ta trÃ¬nh bÃ y káº¿t quáº£ thÃ­ nghiá»‡m cho viá»‡c thá»ƒ hiá»ƒn hiá»‡u nÄƒng cá»§a TwMinSwap
Ä‘Æ°á»£c Ä‘á» xuáº¥t vá»›i data stream phÃ¡t sinh lÃ  synthetic data stream. Äáº·c biá»‡t, ta muá»‘n tráº£
lá»i nhá»¯ng cÃ¢u há»i bÃªn dÆ°á»›i:</p>
<p><b>Q1</b>: CÃ³ bao nhiÃªu top-k time weighted frequent items mÃ  ta cÃ³ thá»ƒ khÃ¡m phÃ¡?</p>
<p><b>Q2</b>:Ta Æ°á»›c lÆ°á»£ng time-weighted count cá»§a nhá»¯ng items khÃ¡m phÃ¡ Ä‘Æ°á»£c chÃ­nh
xÃ¡c nhÆ° tháº¿ nÃ o?</p>
<p><b>Q3</b>: TwMinSwap cháº¡y nhanh nhÆ° tháº¿ nÃ o?</p>
<h3 class="subheader1">5.4.1 CÃ i Ä‘áº·t thuáº­t toÃ¡n</h3>
<p>Ta xem xÃ©t 2 loáº¡i data stream Ä‘Æ°á»£c phÃ¡t sinh tá»« luáº­t phÃ¢n phá»‘i lÅ©y thá»«a Ä‘á»ƒ minh
há»a bursty item xáº£y ra nÆ¡i N lÃ  chiá»u dÃ i cá»§a stream vÃ  n lÃ  sá»‘ items phÃ¢n biá»‡t.</p>
<p>PhÃ¢n phá»‘i tÄ©nh: N items Ä‘Æ°á»£c phÃ¡t sinh dá»±a theo luáº­t phÃ¢n phá»‘i lÅ©y thá»«a bÃªn
dÆ°á»›i $$Pr[i\;Ä‘Æ°á»£c\;phÃ¡t\;sinh]\propto i^{-\beta},\;vá»›i\;i\in[1,n]$$</p>
<p>PhÃ¢n phá»‘i Ä‘á»™ng: cho 0 $\leq r \leq$ 1, rN items Ä‘áº§u tiÃªn Ä‘Æ°á»£c phÃ¡t sinh tá»« $$Pr[i\;Ä‘Æ°á»£c\;phÃ¡t\;sinh]\propto i^{-\beta}$$</p>
<p>vÃ  (1-r)N items cuá»‘i Ä‘Æ°á»£c phÃ¡t sinh tá»« $$Pr[i\;Ä‘Æ°á»£c\;phÃ¡t\;sinh]\propto (n-i+1)^{-\beta}$$</p>
<p>Trong thÃ­ nghiá»‡m cá»§a ta, Î² Ä‘Æ°á»£c thay Ä‘á»•i trong {0.5,0.75,1,1.25,1.5,1.75}; N =
$10^{6}$, n = $10^{4}$, r = 0.8 vÃ  k = 50 lÃ  cá»‘ Ä‘á»‹nh. á» Ä‘Ã¢y, khi Î² cao hÆ¡n, sá»± phá»• biáº¿n cá»§a item
bá»‹ lá»‡ch nhiá»u hÆ¡n. LÆ°u Ã½ ráº±ng máº·c dÃ¹ chiá»u dÃ i stream N lÃ  cá»‘ Ä‘á»‹nh trong thÃ­ nghiá»‡m
nÃ y, thá»i gian xá»­ lÃ½ má»—i item vÃ  khÃ´ng gian xá»­ lÃ½ cá»§a thuáº­t khÃ´ng phá»¥ thuá»™c vÃ o N.</p>
<p>Ta xem xÃ©t cÃ¡c thuáº­t toÃ¡n cáº¡nh tranh khÃ¡c, vÃ  trong thÃ­ nghiá»‡m nÃ y, táº¥t cáº£ phÆ°Æ¡ng
thá»©c Ä‘á»u Ä‘Æ°á»£c cÃ i Ä‘áº·t báº±ng java</p>
<ul>
<li><b>TwFreg</b> [28]: thuáº­t toÃ¡n dá»±a trÃªn counter Ä‘á»ƒ tÃ¬m time-weighted frequent items
tá»« data stream.</li>
<li><b>TwHCount</b> [29]: thuáº­t toÃ¡n dá»±a trÃªn sketch Ä‘á»ƒ tÃ¬m time-weighted frequent
items tá»« data stream.</li>
<li><b>SpaceSaving</b> [23]: thuáº­t toÃ¡n dá»±a trÃªn counter Ä‘á»ƒ tÃ¬m frequent items tá»« data
stream. VÃ¬ thuáº­t toÃ¡n nÃ y khÃ´ng tÃ¬m time-weighted items, ta so sÃ¡nh thuáº­t toÃ¡n
nÃ y vá»›i nhá»¯ng thuáº­t toÃ¡n khÃ¡c chá»‰ vá»›i phÆ°Æ¡ng diá»‡n recall vÃ  precision.</li>
</ul>
<p>YÃªu cáº§u cá»§a táº¥t cáº£ thuáº­t toÃ¡n nhÆ° bÃªn dÆ°á»›i. TwMinSwap, TwFreg vÃ  SaceSaving
yÃªu cáº§u O(k) khÃ´ng gian bá»™ nhá»›. TwSample yÃªu cáº§u O(sk) vá»›i s lÃ  sá»‘ session song
song phá»¥c vá»¥ cho má»¥c Ä‘Ã­ch láº¥y máº«u Ä‘á»™c láº­p. TwHCount yÃªu cáº§u O(k+rm) nÆ¡i r lÃ  sá»‘
lÆ°á»£ng hash functions vÃ  m lÃ  pháº¡m vi kÃ­ch thÆ°á»›c cá»§a hash function.</p>
<p>Tham sá»‘ cho thuáº­t toÃ¡n TwSample lÃ  s = 10 vÃ  ğ = 0.0001. Tham sá»‘ cho thuáº­t
toÃ¡n TwHcount, sá»­ dá»¥ng tham sá»‘ tá»« paper gá»‘c [], vÃ  thiáº¿t láº­p kÃ­ch thÆ°á»›c table rm tá»›i
1% vÃ  10% cá»§a n.</p>
<img src="./images/FIG05-01.jpg"/>
<h4 align="center"><a name="fig05-01">HÃ¬nh 5-1: So sÃ¡nh giá»¯a cÃ¡c thuáº­t toÃ¡n vá» Precision vÃ  Recall [14]</a></h4>
<h3 class="subheader1">5.4.2. KhÃ¡m phÃ¡ Top-k time-weighted frequent items</h3>
<p>HÃ¬nh 5-1 thá»ƒ hiá»‡n sá»± chÃ­nh xÃ¡c cá»§a items Ä‘Æ°á»£c khÃ¡m phÃ¡ theo khÃ­a cáº¡nh precision
vÃ  recall. Má»™t cÃ¡ch tá»•ng thá»ƒ, thuáº­t toÃ¡n TwMinSwap thá»±c hiá»‡n tá»‘t hÆ¡n cÃ¡c thuáº­t toÃ¡n
khÃ¡c báº¥t cháº¥p loáº¡i phÃ¢n phá»‘i item vÃ  giÃ¡ trá»‹ mÅ© Î². Precision vÃ  recall cá»§a nÃ³ luÃ´n gáº§n
báº±ng 1. TwSample(10) cÃ¡i thiá»‡n Ä‘Æ°á»£c precision vÃ  recall khi Î² cao hÆ¡n nÃ³i chung. LÃ½
do táº¡i sao recall cá»§a TwSample(10) lÃ  tháº¥p cho Î² = 1.75 lÃ  do lÆ°á»£ng lá»›n máº­t Ä‘á»™ xÃ¡c
xuáº¥t dÃ y Ä‘áº·t Ä‘Æ°á»£c gÃ¡n cho chá»‰ má»™t Ã­t items khi Î² lá»›n hÆ¡n, dáº©n Ä‘áº¿n chá»‰ má»™t sá»‘ nhá» $\bar{k}$ < k
Ä‘Æ°á»£c khai thÃ¡c. Sá»‘ chÃ­nh xÃ¡c lÃ  33 vÃ  36 láº§n lÆ°á»£t cho phÃ¢n phá»‘i tÄ©nh vÃ  phÃ¢n phá»‘i
Ä‘á»™ng. Cho TwHCount, luÃ´n luÃ´n $\bar{k}$ = 50, vÃ  cho TwFreg, luÃ´n luÃ´n $\bar{k}$ â‰¥ 49.</p>
<p>TwFreg trÃ¬nh bÃ y pattern tÆ°Æ¡ng tá»± nhÆ° TwSample(10) nhÆ°ng hiá»‡u nÄƒng tháº¥p hÆ¡n
TwSample(10). TwHCount cÃ³ káº¿t quáº£ cao á»Ÿ precision vÃ  recall báº¥t cháº¥p kÃ­ch thÆ°á»›c
cá»§a table nhÆ°ng váº©n tháº¥p hÆ¡n TwMinSwap. Space Saving thá»±c hiá»‡n khÃ¡ tá»‘t cho phÃ¢n
phá»‘i item tÄ©nh: cáº£ hai precision vÃ  recall trung bÃ¬nh 0.9. Tuy nhiÃªn, vÃ¬ SpaceSaving
khÃ´ng xem xÃ©t time-weighting factor, cho phÃ¢n phá»‘i item Ä‘á»™ng hiá»‡u nÄƒng cá»§a nÃ³ tá»¥t
giáº£m khi Î² lá»›n.</p>
<img src="./images/FIG05-02.jpg"/>
<h4 align="center"><a name="fig05-02">HÃ¬nh 5-2: So sÃ¡nh giá»¯a cÃ¡c thuáº­t toÃ¡n vá» Time-weighted count [14]</a></h4>
<h3 class="subheader1">5.4.3. Æ¯á»›c lÆ°á»£ng Time-weighted Count</h3>
<p>HÃ¬nh 5-6 thá»ƒ hiá»‡n Æ°á»›c lÆ°á»£ng time-weighted count cá»§a top-k items Ä‘Æ°á»£c khÃ¡m phÃ¡
cho tá»«ng thuáº­t toÃ¡n. Äáº·c biá»‡t, TwMinSwap Æ°á»›c lÆ°á»£ng ráº¥t chÃ­nh xÃ¡c, mÃ  Ä‘Æ°á»£c thá»ƒ
hiá»‡n bá»Ÿi Ä‘Æ°á»ng tháº³ng mÃ u xanh dÆ°Æ¡ng (háº§u nhÆ° Ä‘Ã¨ lÃªn mÃ u xanh lÃ¡ cÃ¢y).</p>
<p>VÃ¬ TwFreg cung cáº¥p 1 lower bound vÃ  upper bound cá»§a true time-weighted count
cá»§a top-k items Ä‘Æ°á»£c khÃ¡m phÃ¡, ta chá»n trung bÃ¬nh cá»§a 2 bound. NÃ³i chung, khi rank
cá»§a items dáº§n tháº¥p hÆ¡n, sá»± chÃ­nh xÃ¡c bá»‹ sá»¥t giáº£m. Má»™t lÃ½ do cá»§a Æ°á»›c lÆ°á»£ng nghÃ¨o nÃ n
cá»§a TwFreg cho item cÃ³ rank tháº¥p vÃ¬ TwFreg Ä‘Æ°á»£c phÃ¡t triá»ƒn Ä‘áº§u tiÃªn Ä‘á»ƒ tÃ¬m frequent
items mÃ  cÃ³ time-weighted count lá»›n hÆ¡n má»™t ngÆ°á»¡ng nÃ o Ä‘Ã³ hÆ¡n tÃ¬m top-k items
máº·c dÃ¹ nÃ³ duy trÃ¬ cao nháº¥t k items. TwSample(10) thá»ƒ hiá»‡n hiá»‡u nÄƒng tá»‘t thá»© ba, vÃ 
Æ°á»›c lÆ°á»£ng time-weighted count chÃ­nh xÃ¡c hÆ¡n khi Î² lá»›n tÆ°Æ¡ng Ä‘á»‘i. Hiá»‡u nÄƒng trung
bÃ¬nh tá»‘t hÆ¡n TwFreg, nhÆ°ng TwSample(10) khÃ´ng bá»‹ tá»¥t giáº£m tá»¥t giáº£m Ä‘á»‘i vá»›i nhá»¯ng
items cÃ³ rank tháº¥p. Hiá»‡u nÄƒng cá»§a TwHCount phá»¥ thuá»™c nhiá»u vÃ o kÃ­ch thÆ°á»›c cá»§a
hash table rm. Æ¯á»›c lÆ°á»£ng káº¿t quáº£ TwHCount(1) cÃ³ lá»—i ráº¥t lá»›n trong khi
TwHCount(10) lÃ  tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i TwMinSwap</p>
<img src="./images/FIG05-03.jpg"/>
<h4 align="center"><a name="05-03">HÃ¬nh 5-3: So sÃ¡nh giá»¯a cÃ¡c thuáº­t toÃ¡n vá» Running-time [14]</a></h4>
<h3 class="subheader1">5.4.1. Thá»i gian thá»±c thi</h3>
<p>HÃ¬nh 5-7 thá»ƒ hiá»‡n thá»i gian cháº¡y cá»§a thuáº­t toÃ¡n cho xá»­ lÃ½ táº¥t cáº£ items trÃªn data
stream. Xu hÆ°á»›ng chung lÃ  thá»i gian cháº¡y giáº£m khi Î² tÄƒng. Khi Î² tÄƒng, xÃ¡c xuáº¥t má»™t
item má»›i tá»›i lÃ  item Ä‘ang theo dÃµi tÄƒng, dáº©n tá»›i khÃ´ng thÆ°á»ng xuyÃªn gá»i tá»›i bÆ°á»›c loáº¡i
bá» nhÆ°ng lÃ  DownSampling trong TwSample.</p>
<p>TwSample(10) thá»ƒ hiá»‡n thá»i thá»i gian cháº¡y tháº¥p vÃ¬ thá»±c hiá»‡n 10 session láº¥y máº«u
Ä‘á»™c láº­p. Máº·c dÃ¹ TwFreg cÃ³ cÃ¹ng thá»i gian xá»­ lÃ½ má»—i item nhÆ° TwMinSwap trong
khÃ¡i niá»‡m Big-O, TwFreg gá»i nhiá»u phÃ©p tÃ­nh cho bÆ°á»›c loáº¡i bá» hÆ¡n TwMinSwap.
TwFreg cáº­p nháº­t nhiá»u biáº¿n hÆ¡n vÃ  duyá»‡t items Ä‘Æ°á»£c theo dÃµi hai láº§n trong
TwMinSwap chá»‰ duyá»‡t chÃºng má»™t láº§n. Káº¿t quáº£ Ä‘áº¡t Ä‘Æ°á»£c cho tháº¥y TwFreg thay Ä‘á»•i
nhiá»u trong thá»±c táº¿ hÆ¡n TwMinSwap.</p>
<p>VÃ¬ TwHCount cÃ³ OI thá»i gian xá»­ lÃ½ má»—i item, nÃ³ cháº¡y nhanh nháº¥t. Tháº­t sá»±, thá»i
gian cháº¡y nhanh cÃ³ Ä‘Æ°á»£c bá»Ÿi duy trÃ¬ má»™t hash table vá»›i kÃ­ch thÆ°á»›c rm cho viá»‡c xáº¥p
xá»‰ time-weighted count, dáº©n tá»›i sá»­ dá»¥ng bá»™ nhá»› nhiá»u hÆ¡n TwMinSwap. Máº·c dÃ¹ thá»i
gian cháº¡y cá»§a TwHCount khÃ´ng phá»¥ thuá»™c vÃ o m, nhÆ°ng Ä‘á»ƒ Ä‘áº£m báº£o error cá»§a Æ°á»›c
lÆ°á»£ng time-weighted count tháº¥p, rm nÃªn lá»›n nhÆ° Ä‘Æ°á»£c thá»ƒ hiá»‡n trong hÃ¬nh 5-6.</p>
<h2><a name="5.5">5.5. Váº­n dá»¥ng</a></h2>
<p>Trong má»¥c nÃ y, chÃºng tÃ´i sáº½ trÃ¬nh bÃ y cÃ¡ch mÃ  thuáº­t toÃ¡n TwMinSwap Ä‘Æ°á»£c tÃ­ch
há»£p nhÆ° tháº¿ nÃ o trong há»‡ thá»‘ng phÃ¢n tÃ­ch Data Stream mÃ  chÃºng tÃ´i Ä‘ang xÃ¢y dá»±ng.
HÃ¬nh 5-4 cho biáº¿t interface mÃ  há»‡ thá»‘ng cung cáº¥p cho má»™t thuáº­t toÃ¡n Ä‘á»ƒ tÃ­ch há»£p vÃ o
há»‡ thá»‘ng.</p>
<img src="./images/FIG05-04.jpg"/>
<h4 align="center">HÃ¬nh 5-4: Lá»›p interface tÃ­ch há»£p thuáº­t toÃ¡n</h4>
<p>Theo interface FrequentPattern sáº½ cÃ³ function mÃ  thuáº­t toÃ¡n cáº§n implement cho
lá»›p TwMinSwap:</p>
<ul>
<li><b>setParameters</b>: lÃ  nÆ¡i thiáº¿t láº­p tham sá»‘ cho thuáº­t toÃ¡n. VÃ¬ thuáº­t toÃ¡n yÃªu
cáº§u 2 tham sá»‘ lÃ  time decay $\alpha$, 0 < $\alpha$ â‰¤ 1 vÃ  k, k > 0 cho biáº¿t sá»‘ lÆ°á»£ng
frequent item muá»‘n khai thÃ¡c, Input cá»§a function kiá»ƒu String cÃ³ dáº¡ng
â€œk,$\alpha$".</li>
<li><b>Run</b>: lÃ  nÆ¡i cháº¡y thuáº­t toÃ¡n xá»­ lÃ½ cho má»—i item tá»›i. Thuáº­t toÃ¡n Ä‘Æ°á»£c cÃ i
Ä‘áº·t trong function nÃ y. Input cá»§a function lÃ  item tá»›i thÆ°á»ng lÃ  idItem cÃ³
kiá»ƒu String.</li>
<li><b>getResults</b>: lÃ  nÆ¡i láº¥y káº¿t quáº£ cá»§a thuáº­t toÃ¡n. Thuáº­t toÃ¡n tráº£ vá» kiá»ƒu String
cÃ³ Ä‘á»‹nh dáº¡ng JSon trong Ä‘Ã³ cÃ³ danh sÃ¡ch k pháº§n tá»­ lÃ  pháº§n tá»­ phá»• biáº¿n
kÃ¨m theo tham sá»‘ cho biáº¿t Ä‘á»™ phá»• biáº¿n cá»§a nÃ³.</li>
</ul>
<p>Lá»›p TwMinSwap sáº½ Ä‘Æ°á»£c tÃ­ch há»£p vÃ o há»‡ thá»‘ng vÃ  hoáº¡t Ä‘á»™ng nhÆ° lÃ  thÃ nh
pháº§n lÃµi chuyÃªn xá»­ lÃ½ dá»¯ liá»‡u cá»§a há»‡ thá»‘ng. Káº¿t quáº£ chuá»•i Json Ä‘Æ°á»£c lÆ°u vÃ o
Redis Cluster (ChÆ°Æ¡ng 3) vÃ  phÃ¢n tÃ¡n cho ngÆ°á»i dÃ¹ng.</p>
<h2><a name="5.6">5.6. Tá»•ng káº¿t</a></h2>
<p>Trong chÆ°Æ¡ng nÃ y, chÃºng ta Ä‘Ã£ bÃ n luáº­n vá» má»™t thuáº­t toÃ¡n khai thÃ¡c frequent
items TwMinSwap trÃªn data stream hiá»‡u quáº£ á»Ÿ khÃ­a cáº¡nh tá»‘c Ä‘á»™ xá»­ lÃ½, tÃ­nh chÃ­nh xÃ¡c
vÃ  sá»­ dá»¥ng bá»™ nhá»›. Thuáº­t toÃ¡n TwMinSwap Ä‘Æ°á»£c truyá»n cáº£m há»©ng bá»Ÿi thuáº­t toÃ¡n xÃ¡c
xuáº¥t TwSample mÃ  cÃ³ má»™t sá»± Ä‘áº£m báº£o tá»‘t vá» lÃ½ thuyáº¿t. CÃ  hai Ä‘á»u yÃªu cáº§u O(k)
khÃ´ng gian bá»™ nhá»› vá»›i k lÃ  sá»‘ lÆ°á»£ng items ta Ä‘ang theo dÃµi. DÃ¹ thuáº­t toÃ¡n TwSample
gáº·p khÃ³ khÄƒn vÃ¬ Ä‘áº·c Ä‘iá»ƒm tá»± nhiÃªn cá»§a xÃ¡c xuáº¥t áº£nh hÆ°á»Ÿng hiá»‡u nÄƒng cá»§a thuáº­t toÃ¡n.
NgÆ°á»£c láº¡i, thuáº­t toÃ¡n TwMinSwap láº¡i cho tháº¥y hiá»‡u nÄƒng tá»‘t hÆ¡n háº³n khÃ´ng chá»‰
TwSample mÃ  cÃ²n Ä‘á»‘i vá»›i cÃ¡c Ä‘á»‘i thá»§ cáº¡nh tranh khÃ¡c. BÃªn cáº¡nh thuáº­t toÃ¡n
TwMinSwap, chÃºng tÃ´i Ä‘Ã£ trÃ¬nh bÃ y cÃ¡ch tÃ­ch há»£p thuáº­t toÃ¡n vÃ o há»‡ thá»‘ng phÃ¢n tÃ­ch
Data Stream.</p>
</body>
</html>